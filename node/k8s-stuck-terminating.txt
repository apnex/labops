cp kube_config_rke.config.yaml ~/.kube/config
  template:
    metadata:
      labels:
        app: nginx
      annotations:
        "cluster-autoscaler.kubernetes.io/safe-to-evict": "false"

kubernetes: rancher/hyperkube:v1.10.3-rancher2

curl -Lo /usr/local/bin/rke https://github.com/rancher/rke/releases/latest/download/rke_linux-amd64


kubectl api-resources --verbs=list --namespaced -o name \
  | xargs -n 1 kubectl get --show-kind --ignore-not-found -n argocd


kubectl -n argocd patch app sockshop-all-in-one -p '{"metadata": {"finalizers": ["resources-finalizer.argocd.argoproj.io"]}}' --type merge
kubectl delete app APPNAME 

kubectl get namespace argocd -o json > argocd.json
### remove the finalizer!
kubectl replace --raw "/api/v1/namespaces/logging/argocd" -f ./argocd.json
